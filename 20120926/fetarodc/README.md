MongoDB レプリケーション(Replica Sets)
=================

概要
=================

![公式ＨＰ](http://www.mongodb.org/display/DOCS/Replica+Sets)を訳しただけですが、、、


MongoDBは冗長化のためにサーバ間で非同期でデータをレプリケーションする仕組みをサポートしています。一つのサーバ（プライマリ/マスタ）だけが書き込み要求を処理します（これは一貫性を保つためです）。また、プライマリノードは、「eventual consistency」が保たれるときだけ、読み込み要求をセカンダリノードへ転送します。

「レプリカセット」と「マスター/スレーブ」という二つのレプリケーション形態があります。「レプリカセット」は「マスター/スレーブ」の上位機能であり、最近はこちらが開発されており、コードもしっかりしています。

![image](http://www.mongodb.org/download/attachments/131603/replia+set.png?version=1&modificationDate=1344261985424)

* レプリカセットは非同期型マスタ／スレーブ構成のレプリケーションをします。また、自動的にフェールオーバとリリカバーできます。
 * レプリカセットは２つ以上のコピーからなります。
 * レプリカセットは自動的にプライマリノードを選出しますが。ただ、shared-nothingのアーキテクチャに基づいているため、本質的にマスターというものは存在しません（構成的にはどれも同じ）。
 * ドライバ(mongosも同様)は自動的にプライマリノードが変わったことを検知し、新しいプライマリノードに更新をかけるようにします（mongos sharding プロセスも同様）。
 
* レプリカセットの用途
 * データ冗長化
 * 自動フェールオーバ／高可用化
 * 分散読み込み
 * メンテナンスが簡単(一般的なマスタスレーブ構成のクラスタに比べて)
 * 障害復旧

